(this["webpackJsonpreact-shogi"]=this["webpackJsonpreact-shogi"]||[]).push([[0],{30:function(e,t,a){},49:function(e,t,a){e.exports=a(61)},61:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),c=a.n(r),s=(a(30),a(3)),o=a(5),l=Object(s.a)((function e(){Object(o.a)(this,e)}));l.LENGTH=9,l.UNCLICKED=95,l.WHITE=7,l.MT=16,l.PIECES=["\u98db","\u89d2","\u91d1","\u9280","\u6842","\u9999","\u6b69","\u7389","\u7adc","\u99ac","","\u5168","\u572d","\u674f","\u3068",""],l.NUM=["","","\u30cb","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u5341\u4e09","\u5341\u56db","\u5341\u4e94","\u5341\u516d","\u5341\u4e03","\u5341\u516b"];var u=a(14),m=a(9),p=a(8),h=function(){function e(t,a,n){Object(o.a)(this,e),this._out=void 0,this._turn=void 0,this._piece_num=void 0,this._out=t,this._turn=a,this._piece_num=n}return Object(s.a)(e,[{key:"out",value:function(){return this._out}},{key:"turn",value:function(){return this._turn}},{key:"piece_num",value:function(){return this._piece_num}},{key:"promote",value:function(){this._piece_num+=l.MT/2,this._out=l.PIECES[this._piece_num]}}]),e}(),E=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),_=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),v=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),d=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),f=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),b=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),T=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return Object(o.a)(this,a),t.call(this,l.PIECES[n],e,n)}return Object(s.a)(a)}(h),H=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Object(o.a)(this,a),t.call(this," ",e,n)}return Object(s.a)(a)}(h);function k(e){var t="";return e.is_captured?t=e.is_mobile?"mobile-captured":"captured":(t=e.is_mobile?"mobile-square piece":"square piece",e.is_black||(t+=" white")),e.is_final&&(t+=" final"),e.is_clicked&&(t+=" click"),e.can_control&&(t+=" attack"),i.a.createElement("button",{className:t,onClick:e.onClick},e.value)}var L=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"renderSquare",value:function(e,t,a,n){var r=this,c=n-2*l.WHITE,s=Math.floor(c/l.LENGTH),o=c%l.LENGTH;return i.a.createElement(k,{key:n,is_final:e,is_clicked:t,value:this.props.squares[s][o].out(),is_black:this.props.squares[s][o].turn(),is_captured:!1,can_control:a,onClick:function(){return r.props.onClick(n)},is_mobile:this.props.is_mobile})}},{key:"content",value:function(e){for(var t=[],a=l.LENGTH-1;a>=0;--a)this.props.control_piece[a][e]?t.push(this.renderSquare(!1,!1,!0,a*l.LENGTH+e+2*l.WHITE)):a*l.LENGTH+e===this.props.final_piece-2*l.WHITE?t.push(this.renderSquare(!0,!1,!1,a*l.LENGTH+e+2*l.WHITE)):a*l.LENGTH+e===this.props.clicked_piece-2*l.WHITE?t.push(this.renderSquare(!1,!0,!1,a*l.LENGTH+e+2*l.WHITE)):t.push(this.renderSquare(!1,!1,!1,a*l.LENGTH+e+2*l.WHITE));return t}},{key:"render",value:function(){for(var e=new Array,t=0;t<l.LENGTH;++t)e=e.concat(i.a.createElement("div",{className:"board-row ley",key:t},this.content(t)));return(i.a.createElement("div",null,e))}}]),a}(i.a.Component),G=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"renderSquare",value:function(e,t){var a=this;return(i.a.createElement(k,{key:t,is_final:!1,is_clicked:e,value:l.PIECES[t],is_black:this.props.is_black,is_captured:!0,can_control:!1,onClick:this.props.is_black?function(){return a.props.onClick(t)}:function(){return a.props.onClick(t+l.WHITE)},is_mobile:this.props.is_mobile}))}},{key:"render",value:function(){for(var e=new Array,t=this.props.turn?this.props.clicked_piece:this.props.clicked_piece-l.WHITE,a=this.props.is_black,n=this.props.turn,r=0;r<l.WHITE;++r){var c=this.props.squares[r];c>0&&(e=r===t&&a===n?e.concat(i.a.createElement("div",{className:"board-row ley",key:r},this.renderSquare(!0,r))):e.concat(i.a.createElement("div",{className:"board-row ley",key:r},this.renderSquare(!1,r))),c>1&&(e=e.concat(i.a.createElement("div",{className:"board-row ley",key:"num"+r},i.a.createElement("button",{className:"number"},l.NUM[c])))))}return(i.a.createElement("div",null,e))}}]),a}(i.a.Component),w=a(12),C=a.n(w),g=a(84),I=a(83),y=a(82),O=a(80),j=a(81),S=a(79);function W(e){return i.a.createElement("div",null,i.a.createElement(I.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(S.a,{id:"alert-dialog-title"},e.title),i.a.createElement(O.a,null,i.a.createElement(j.a,{id:"alert-dialog-description"},e.message)),i.a.createElement(y.a,null,i.a.createElement(g.a,{onClick:e.handleYes,color:"primary"},"\u306f\u3044"),i.a.createElement(g.a,{onClick:e.handleNo,color:"primary"},"\u3044\u3044\u3048"))))}function P(e){return i.a.createElement("div",null,i.a.createElement(I.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(S.a,{id:"alert-dialog-title"},e.title),i.a.createElement(O.a,null,i.a.createElement(j.a,{id:"alert-dialog-description",style:{whiteSpace:"pre-line"}},e.message)),i.a.createElement(y.a,null,i.a.createElement(g.a,{onClick:e.handleClose,color:"primary"},"OK"))))}var M=a(33),D=a.n(M),A=a(32),K=a.n(A),U=a(31),q=a.n(U),B=a(34),z=a.n(B);function R(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],[]),a=0;a<l.LENGTH;++a){t[a]=[];for(var n=0;n<l.LENGTH;++n)t[a].push(new H)}if("lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1"===e){for(var i=0;i<l.LENGTH;++i)t[i][2]=new E(!1),t[i][6]=new E(!0);t[0][0]=new _(!1),t[8][0]=new _(!1),t[0][8]=new _(!0),t[8][8]=new _(!0),t[1][0]=new v(!1),t[7][0]=new v(!1),t[1][8]=new v(!0),t[7][8]=new v(!0),t[2][0]=new d(!1),t[6][0]=new d(!1),t[2][8]=new d(!0),t[6][8]=new d(!0),t[3][0]=new f(!1),t[5][0]=new f(!1),t[3][8]=new f(!0),t[5][8]=new f(!0),t[1][1]=new b(!1),t[7][7]=new b(!0),t[7][1]=new T(!1),t[1][7]=new T(!0),t[4][0]=new N(!1),t[4][8]=new N(!0)}return t}function x(e,t){var a=new H;return 0===e&&(a=new T(t)),1===e&&(a=new b(t)),2===e&&(a=new f(t)),3===e&&(a=new d(t)),4===e&&(a=new v(t)),5===e&&(a=new _(t)),6===e&&(a=new E(t)),a}function Y(){return new Array(l.WHITE).fill(0)}function J(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],a=0;a<l.LENGTH;++a)t[a]=new Array(l.LENGTH).fill(e);return t}function F(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],o=t[n][i].piece_num();if(6!==o)if(2===o||3===o||4===o||7===o||11<=o&&o<=14){var u,m;4===o?(u=new Array(-1,1),m=new Array(-2,-2)):3===o?(u=new Array(-1,0,1,1,-1),m=new Array(-1,-1,-1,1,1)):2===o||11<=o&&o<=14?(u=new Array(-1,0,1,1,0,-1),m=new Array(-1,-1,-1,0,1,0)):s?(u=new Array(-1,0,1,1,1,0,-1,-1),m=new Array(-1,-1,-1,0,1,1,1,0)):(u=new Array(0),m=new Array(0));for(var p=0;p<u.length;++p){var h=a?n+u[p]:n-u[p],E=a?i+m[p]:i-m[p];0<=h&&h<l.LENGTH&&0<=E&&E<l.LENGTH&&(++e[h][E],h===r&&E===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o))}}else if(5!==o)if(1!==o&&9!==o)if(0!==o&&8!==o);else{for(var _=new Array(0,1,0,-1),v=new Array(-1,0,1,0),d=0;d<_.length;++d)for(var f=n+_[d],b=i+v[d];0<=f&&f<l.LENGTH&&0<=b&&b<l.LENGTH&&(++e[f][b],f===r&&b===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o),t[f][b].piece_num()===l.MT||7===t[f][b].piece_num()&&t[f][b].turn()!==a);)f+=_[d],b+=v[d];if(8===o){_=new Array(-1,1,1,-1),v=new Array(-1,-1,1,1);for(var T=0;T<_.length;++T){var N=n+_[T],H=i+v[T];0<=N&&N<l.LENGTH&&0<=H&&H<l.LENGTH&&(++e[N][H],N===r&&H===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o))}}}else{for(var k=new Array(-1,1,1,-1),L=new Array(-1,-1,1,1),G=0;G<k.length;++G)for(var w=n+k[G],C=i+L[G];0<=w&&w<l.LENGTH&&0<=C&&C<l.LENGTH&&(++e[w][C],w===r&&C===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o),t[w][C].piece_num()===l.MT||7===t[w][C].piece_num()&&t[w][C].turn()!==a);)w+=k[G],C+=L[G];if(9===o){k=new Array(0,1,0,-1),L=new Array(-1,0,1,0);for(var g=0;g<k.length;++g){var I=n+k[g],y=i+L[g];0<=I&&I<l.LENGTH&&0<=y&&y<l.LENGTH&&(++e[I][y],I===r&&y===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o))}}}else for(var O=-1,j=a?i+O:i-O;0<=j&&j<l.LENGTH&&(++e[n][j],n===r&&j===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o),t[n][j].piece_num()===l.MT||7===t[n][j].piece_num()&&t[n][j].turn()!==a);)j=a?j+O:j-O;else if(a?0!==i:i!==l.LENGTH-1){var S=a?i-1:i+1;++e[n][S],n===r&&S===c&&(e[l.LENGTH][0]=n*l.LENGTH+i,e[l.LENGTH][1]=o)}}function Q(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=[],o=0;o<l.LENGTH+1;++o)s[o]=new Array(l.LENGTH).fill(0);if(-1!==a)return F(s,e,t,a,n),s;for(var u=0;u<l.LENGTH;++u)for(var m=0;m<l.LENGTH;++m)e[u][m].piece_num()!==l.MT&&e[u][m].turn()===t&&F(s,e,t,u,m,i,r,c);return s}function V(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(-1===a)for(var i=0;i<l.LENGTH;++i)for(var r=0;r<l.LENGTH;++r)if(7===e[i][r].piece_num()&&e[i][r].turn()===t){a=i,n=r,i=l.LENGTH,r=l.LENGTH;break}var c=Q(e,!t,-1,-1,a,n),s=c[a][n];return s>0}function X(e,t,a){for(var n=C.a.cloneDeep(e),i=-1,r=-1,c=0;c<l.LENGTH;++c)for(var s=0;s<l.LENGTH;++s)if(7===n[c][s].piece_num()&&n[c][s].turn()===a){i=c,r=s,c=l.LENGTH,s=l.LENGTH;break}var o=Q(n,!a,-1,-1,i,r),u=o[i][r];if(0===u)return!1;for(var m=new Array(1,1,0,-1,-1,-1,0,1),p=new Array(0,1,1,1,0,-1,-1,-1),h=0;h<m.length;++h){var E=i+m[h],_=r+p[h];if(!(E<0||l.LENGTH<=E||_<0||l.LENGTH<=_)&&((n[E][_].piece_num()===l.MT||n[E][_].turn()!==a)&&0===o[E][_]))return!1}if(u>1)return!0;for(var v=o[l.LENGTH][0],d=Math.floor(v/l.LENGTH),f=v%l.LENGTH,b=o[l.LENGTH][1],T=n[d][f],N=0;N<l.LENGTH;++N)for(var k=0;k<l.LENGTH;++k)if(n[N][k].turn()===a&&n[N][k].piece_num()!==l.MT&&7!==n[N][k].piece_num()){var L=Q(n,a,N,k);if(L[d][f]){if(n[d][f]=n[N][k],n[N][k]=new H,!V(n,a,i,r))return!1;n[N][k]=n[d][f],n[d][f]=T}if(0===b||1===b||5===b||8===b||9===b){var G=d-i,w=f-r;0!==G&&(G/=Math.abs(G)),0!==w&&(w/=Math.abs(w));for(var g=i+G,I=r+w;g!==d||I!==f;){if(L[g][I]>0){if(n[g][I]=n[N][k],n[N][k]=new H,!V(n,a,i,r))return!1;n[N][k]=n[g][I],n[g][I]=new H}g+=G,I+=w}}}if(0===b||1===b||5===b||8===b||9===b){var y=d-i,O=f-r;0!==y&&(y/=Math.abs(y)),0!==O&&(O/=Math.abs(O));for(var j=i+y,S=r+O;j!==d||S!==f;){for(var W=0;W<l.WHITE;++W)if(0!==t[W]){if(n[j][S]=x(W,a),Z(e,n,t,-1,-1,j,S,a)){if(6===W&&$(n,j,a)){n[j][S]=new H;continue}return!1}n[j][S]=new H}j+=y,S+=O}}return!0}function Z(e,t,a,n,i,r,c,s){var o=t[r][c].piece_num();return-1===n?4===o?s?c>1:c<l.LENGTH-1-1:5===o?s?0!==c:c!==l.LENGTH-1:6!==o||(s?0!==c:c!==l.LENGTH-1)&&!X(t,a,!s):Q(e,s,n,i)[r][c]>0}function $(e,t,a){for(var n=0,i=0;i<l.LENGTH;++i)6===e[t][i].piece_num()&&e[t][i].turn()===a&&++n;return n>=2}var ee=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={start_pos:n.props.start_pos,start_black_piece:n.props.start_black_piece,start_white_piece:n.props.start_white_piece,current_pos:n.props.current_pos,current_black_piece:n.props.current_black_piece,current_white_piece:n.props.current_white_piece,control_piece:n.props.control_piece,kifu:n.props.kifu,turn:n.props.turn,moves:n.props.moves,moves_sub:n.props.moves_sub,moves_max:n.props.moves_max,clicked_piece:n.props.clicked_piece,final_piece:n.props.final_piece,black_name:n.props.black_name,white_name:n.props.white_name,is_black:n.props.is_black,moved_piece:n.props.moves,promotion:n.props.promotion,resign:n.props.resign,result:n.props.result,is_mobile:n.props.is_mobile,is_online:n.props.is_online},n.handlePromotion=n.handlePromotion.bind(Object(u.a)(n)),n.handleResign=n.handleResign.bind(Object(u.a)(n)),n.handleResultClose=n.handleResultClose.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleClick",value:function(e){var t=this;if(!(this.state.moves<0)){var a=this.state.clicked_piece,n=this.state.turn,i=this.state.is_online,r=C.a.cloneDeep(this.state.current_pos),c=C.a.cloneDeep(this.state.current_black_piece),s=C.a.cloneDeep(this.state.current_white_piece);if(e<2*l.WHITE){if(a===l.UNCLICKED){if(n?e<l.WHITE&&c[e]>0:e>=l.WHITE&&s[e-l.WHITE]>0&&!i){for(var o=J(!0),u=e>=l.WHITE?e-l.WHITE:e,m=0;m<l.LENGTH;++m)for(var p=0;p<l.LENGTH;++p)r[m][p].piece_num()!==l.MT?o[m][p]=!1:4===u?o[m][p]=n?p>1:p<l.LENGTH-1-1:5===u?o[m][p]=n?0!==p:p!==l.LENGTH-1:6===u&&(o[m][p]=n?0!==p:p!==l.LENGTH-1,r[m][p]=x(u,n),$(r,m,n)&&(o[m][p]=!1),(n?p>1&&7===r[m][p-1].piece_num()&&r[m][p-1].turn()!==n:p<l.LENGTH-1&&7===r[m][p+1].piece_num()&&r[m][p+1].turn()!==n)&&X(r,n?s:c,!n)&&(o[m][p]=!1),r[m][p]=new H),o[m][p]&&(r[m][p]=x(u,n),o[m][p]=!V(r,n),r[m][p]=new H);this.setState({control_piece:o,clicked_piece:e})}return}this.setState({clicked_piece:l.UNCLICKED,control_piece:J()})}else{var h=Math.floor((e-2*l.WHITE)/l.LENGTH),E=(e-2*l.WHITE)%l.LENGTH,_=this.state.current_pos.concat();if(this.state.clicked_piece!==l.UNCLICKED){if(this.state.control_piece[h][E]){var v=this.state.moves,d=C.a.cloneDeep(c),f=C.a.cloneDeep(s),b=-1,T=-1;if(a<2*l.WHITE)n?(--d[a],r[h][E]=x(a,n)):(--f[a-l.WHITE],r[h][E]=x(a-l.WHITE,n));else{b=Math.floor((a-2*l.WHITE)/l.LENGTH),T=(a-2*l.WHITE)%l.LENGTH;var N=r[h][E];r[h][E]=r[b][T],r[b][T]=new H;var k=N.piece_num();k!==l.MT&&(k>l.WHITE&&(k-=l.MT/2),n?++d[k]:++f[k])}var L=r[h][E].piece_num(),G=!1;if(!(-1!==b&&(n?E<3||T<3:E>l.LENGTH-1-3||T>l.LENGTH-1-3)&&L<l.WHITE&&""!==l.PIECES[L+l.MT/2])||(5<=L&&L<=6?(n?0===E:E===l.LENGTH-1)&&(r[h][E].promote(),G=!0):4===L&&(n?E<2:E>l.LENGTH-1-2)&&(r[h][E].promote(),G=!0),G)){var w=this.state.kifu;return w=(w=w.concat(a)).concat(G?e+l.LENGTH*l.LENGTH:e),this.setState({current_pos:r,current_black_piece:d,current_white_piece:f,control_piece:J(),kifu:w,turn:!n,moves:v+1,moves_sub:v+1,clicked_piece:l.UNCLICKED,final_piece:e}),X(r,n?f:d,!n)?(setTimeout((function(){t.setState({result:!0})}),200),void this.setState({moves:-1,moves_max:v+1})):void 0}this.setState({moved_piece:e,promotion:!0})}else this.setState({control_piece:J(),clicked_piece:l.UNCLICKED})}else{if(_[h][E].piece_num()===l.MT||_[h][E].turn()!==n||i&&!n)return;for(var g=Q(_,n,h,E,-1,-1,!1),I=J(!1),y=0;y<l.LENGTH;++y)for(var O=0;O<l.LENGTH;++O)if(0!==g[y][O]&&(_[y][O].piece_num()===l.MT||_[y][O].turn()!==n)){var j=r[y][O];r[y][O]=r[h][E],r[h][E]=new H,I[y][O]=!V(r,n),r[h][E]=r[y][O],r[y][O]=j}this.setState({control_piece:I,clicked_piece:e})}}}}},{key:"resign",value:function(){this.state.moves<0||this.setState({resign:!0})}},{key:"rotate",value:function(){this.setState({is_black:!this.state.is_black,clicked_piece:l.UNCLICKED,control_piece:J()})}},{key:"handlePromotion",value:function(e){var t=this,a=this.state.clicked_piece,n=this.state.turn,i=C.a.cloneDeep(this.state.current_pos),r=C.a.cloneDeep(this.state.current_black_piece),c=C.a.cloneDeep(this.state.current_white_piece),s=this.state.moves,o=C.a.cloneDeep(r),u=C.a.cloneDeep(c),m=-1,p=-1,h=this.state.moved_piece,E=Math.floor((h-2*l.WHITE)/l.LENGTH),_=(h-2*l.WHITE)%l.LENGTH;if(a<2*l.WHITE)n?(--o[a],i[E][_]=x(a,n)):(--u[a-l.WHITE],i[E][_]=x(a-l.WHITE,n));else{m=Math.floor((a-2*l.WHITE)/l.LENGTH),p=(a-2*l.WHITE)%l.LENGTH;var v=i[E][_];i[E][_]=i[m][p],i[m][p]=new H;var d=v.piece_num();d!==l.MT&&(d>l.WHITE&&(d-=l.MT/2),n?++o[d]:++u[d])}e&&i[E][_].promote();var f=this.state.kifu;if(f=(f=f.concat(a)).concat(e?h+l.LENGTH*l.LENGTH:h),this.setState({current_pos:i,current_black_piece:o,current_white_piece:u,control_piece:J(),kifu:f,turn:!n,moves:s+1,moves_sub:s+1,clicked_piece:l.UNCLICKED,final_piece:h,moved_piece:l.UNCLICKED,promotion:!1}),X(i,n?u:o,!n))return setTimeout((function(){t.setState({result:!0})}),200),void this.setState({moves:-1,moves_max:s+1})}},{key:"handleResign",value:function(e){var t=this,a=this.state.moves;e?(setTimeout((function(){t.setState({result:!0})}),200),this.setState({moves:-1,moves_max:a,clicked_piece:l.UNCLICKED,control_piece:J(),resign:!1})):this.setState({resign:!1})}},{key:"handleResultClose",value:function(){this.setState({result:!1})}},{key:"setBoard",value:function(e){e<0&&(e=0),e>this.state.moves_max&&(e=this.state.moves_max);for(var t=0,a=0,n=this.state.kifu,i=C.a.cloneDeep(this.state.start_pos),r=C.a.cloneDeep(this.state.start_black_piece),c=C.a.cloneDeep(this.state.start_white_piece),s=l.UNCLICKED,o=l.UNCLICKED,u=!0;t<e;){var m=n[a];if(s!==l.UNCLICKED)if(s<2*l.WHITE){var p=Math.floor((m-2*l.WHITE)/l.LENGTH),h=(m-2*l.WHITE)%l.LENGTH;u?(--r[s],i[p][h]=x(s,u)):(--c[s-l.WHITE],i[p][h]=x(s-l.WHITE,u)),s=l.UNCLICKED,o=m,u=!u,++t,++a}else{var E=!1;m>=l.LENGTH*l.LENGTH+2*l.WHITE&&(E=!0,m-=l.LENGTH*l.LENGTH);var _=Math.floor((m-2*l.WHITE)/l.LENGTH),v=(m-2*l.WHITE)%l.LENGTH,d=Math.floor((s-2*l.WHITE)/l.LENGTH),f=(s-2*l.WHITE)%l.LENGTH,b=i[_][v];i[_][v]=i[d][f],i[d][f]=new H;var T=b.piece_num();T!==l.MT&&(T>l.WHITE&&(T-=l.MT/2),u?++r[T]:++c[T]),E&&i[_][v].promote(),s=l.UNCLICKED,o=m,u=!u,++t,++a}else s=n[a],++a}this.setState({current_pos:i,current_black_piece:r,current_white_piece:c,final_piece:o,moves_sub:e,turn:u})}},{key:"render",value:function(){var e=this,t="game-info space";this.state.is_black||(t+=" white");var a=this.state.moves_sub,n=this.state.is_black?"\u25b3".concat(this.state.white_name,"\u3000\u25b2").concat(this.state.black_name):"\u25b2".concat(this.state.black_name,"\u3000\u25b3").concat(this.state.white_name),r=this.state.moves_max,c=this.state.is_mobile,s=c?"small":"large",o=c?"small":"medium",l=-1===this.state.moves&&a>0?i.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a-10)}},i.a.createElement(q.a,{fontSize:s})):i.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a-10)}},i.a.createElement(q.a,{fontSize:s})),u=-1===this.state.moves&&a>0?i.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a-1)}},i.a.createElement(K.a,{fontSize:s})):i.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a-1)}},i.a.createElement(K.a,{fontSize:s})),m=-1===this.state.moves&&a<this.state.moves_max?i.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a+1)}},i.a.createElement(D.a,{fontSize:s})):i.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a+1)}},i.a.createElement(D.a,{fontSize:s})),p=-1===this.state.moves&&a<this.state.moves_max?i.a.createElement(g.a,{variant:"contained",onClick:function(){return e.setBoard(a+10)}},i.a.createElement(z.a,{fontSize:s})):i.a.createElement(g.a,{variant:"contained",disabled:!0,onClick:function(){return e.setBoard(a+10)}},i.a.createElement(z.a,{fontSize:s}));return c?i.a.createElement("div",{className:"game-info"},i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"game-sub"},this.state.moves>=0&&i.a.createElement("div",{className:"mobile-button"},i.a.createElement(g.a,{variant:"contained",color:"secondary",size:o,onClick:function(){return e.resign()}},"\u6295\u4e86")),i.a.createElement("div",{className:"mobile-button"},i.a.createElement(g.a,{variant:"contained",color:"primary",size:o,onClick:function(){return e.rotate()}},"\u53cd\u8ee2"))),-1===this.state.moves&&r>0&&i.a.createElement("div",{className:"mobile-button"},i.a.createElement(g.a,{variant:"contained",size:o,color:"inherit",onClick:function(){return e.setBoard(0)}},"\u958b\u59cb\u5c40\u9762")),-1===this.state.moves&&r>0&&i.a.createElement("div",{className:"mobile-button"},i.a.createElement(g.a,{variant:"contained",size:o,color:"inherit",onClick:function(){return e.setBoard(r)}},"\u7d42\u5c40\u56f3")),i.a.createElement("div",{className:"center bold"},n),i.a.createElement("div",{className:"center"},u,"\xa0",a,"\u624b\u76ee \xa0",m),i.a.createElement("div",{className:t},i.a.createElement("div",{className:"mobile-game-info-white white"},i.a.createElement("div",null,"\u25b3"),i.a.createElement(G,{squares:this.state.current_white_piece,clicked_piece:this.state.clicked_piece,is_black:!1,turn:this.state.turn,onClick:function(t){return e.handleClick(t)},is_mobile:c})),i.a.createElement("div",null,i.a.createElement(L,{squares:this.state.current_pos,onClick:function(t){return e.handleClick(t)},clicked_piece:this.state.clicked_piece,control_piece:this.state.control_piece,final_piece:this.state.final_piece,is_mobile:c})),i.a.createElement("div",{className:"mobile-game-info-black"},i.a.createElement("div",null,"\u25b2"),i.a.createElement(G,{squares:this.state.current_black_piece,clicked_piece:this.state.clicked_piece,is_black:!0,turn:this.state.turn,onClick:function(t){return e.handleClick(t)},is_mobile:c})))),i.a.createElement(W,{title:"\u6210\u308a\u307e\u3059\u304b\uff1f",message:"",open:this.state.promotion,handleYes:function(){return e.handlePromotion(!0)},handleNo:function(){return e.handlePromotion(!1)}}),i.a.createElement(W,{title:"\u6295\u4e86\u3057\u307e\u3059\u304b\uff1f",message:"",open:this.state.resign,handleYes:function(){return e.handleResign(!0)},handleNo:function(){return e.handleResign(!1)}}),i.a.createElement(P,{title:"\u307e\u3067".concat(a,"\u624b\u306b\u3066").concat(this.state.turn?this.state.white_name:this.state.black_name,"\u306e\u52dd\u3061\u3067\u3059\uff01"),message:"",open:this.state.result,handleClose:this.handleResultClose})):i.a.createElement("div",{className:"game-info"},i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"center bold"},n),i.a.createElement("div",{className:"center"},l,"\xa0",u,"\xa0",a,"\u624b\u76ee \xa0",m,"\xa0",p),i.a.createElement("div",{className:t},i.a.createElement("div",{className:"game-info-white white"},i.a.createElement("div",null,"\u25b3"),i.a.createElement(G,{squares:this.state.current_white_piece,clicked_piece:this.state.clicked_piece,is_black:!1,turn:this.state.turn,onClick:function(t){return e.handleClick(t)},is_mobile:c})),i.a.createElement("div",{className:"game-board"},i.a.createElement(L,{squares:this.state.current_pos,onClick:function(t){return e.handleClick(t)},clicked_piece:this.state.clicked_piece,control_piece:this.state.control_piece,final_piece:this.state.final_piece,is_mobile:c})),i.a.createElement("div",{className:"game-info-black"},i.a.createElement("div",null,"\u25b2"),i.a.createElement(G,{squares:this.state.current_black_piece,clicked_piece:this.state.clicked_piece,is_black:!0,turn:this.state.turn,onClick:function(t){return e.handleClick(t)},is_mobile:c})))),i.a.createElement("div",{className:"game-sub"},this.state.moves>=0&&i.a.createElement("div",{className:"button"},i.a.createElement(g.a,{variant:"contained",color:"secondary",size:o,onClick:function(){return e.resign()}},"\u6295\u4e86")),i.a.createElement("div",{className:"button"},i.a.createElement(g.a,{variant:"contained",color:"primary",size:o,onClick:function(){return e.rotate()}},"\u53cd\u8ee2")),-1===this.state.moves&&r>0&&i.a.createElement("div",{className:"button"},i.a.createElement(g.a,{variant:"contained",size:o,color:"inherit",onClick:function(){return e.setBoard(0)}},"\u958b\u59cb\u5c40\u9762")),-1===this.state.moves&&r>0&&i.a.createElement("div",{className:"button"},i.a.createElement(g.a,{variant:"contained",size:o,color:"inherit",onClick:function(){return e.setBoard(r)}},"\u7d42\u5c40\u56f3"))),i.a.createElement(W,{title:"\u6210\u308a\u307e\u3059\u304b\uff1f",message:"",open:this.state.promotion,handleYes:function(){return e.handlePromotion(!0)},handleNo:function(){return e.handlePromotion(!1)}}),i.a.createElement(W,{title:"\u6295\u4e86\u3057\u307e\u3059\u304b\uff1f",message:"",open:this.state.resign,handleYes:function(){return e.handleResign(!0)},handleNo:function(){return e.handleResign(!1)}}),i.a.createElement(P,{title:"\u307e\u3067".concat(a,"\u624b\u306b\u3066").concat(this.state.turn?this.state.white_name:this.state.black_name,"\u306e\u52dd\u3061\u3067\u3059\uff01"),message:"",open:this.state.result,handleClose:this.handleResultClose}))}}]),a}(i.a.Component),te=navigator.userAgent.toLowerCase(),ae=null!==te.match(/Mobile/)||null!==te.match(/mobile/);c.a.render(i.a.createElement(ee,{start_pos:R(),start_black_piece:Y(),start_white_piece:Y(),current_pos:R(),current_black_piece:Y(),current_white_piece:Y(),control_piece:J(),kifu:[],turn:!0,moves:0,moves_sub:0,moves_max:0,clicked_piece:l.UNCLICKED,final_piece:l.UNCLICKED,black_name:"\u5148\u624b",white_name:"\u5f8c\u624b",is_black:!0,moved_piece:l.UNCLICKED,promotion:!1,resign:!1,result:!1,is_mobile:ae,is_online:!1}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.d3c57d22.chunk.js.map